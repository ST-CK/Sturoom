-- 확장
create extension if not exists pgcrypto;

-- 메시지 테이블
create table if not exists public.messages (
  id uuid primary key default gen_random_uuid(),
  content text not null check (char_length(content) <= 200),
  inserted_at timestamptz default now()
);

-- RLS on
alter table public.messages enable row level security;

-- 개발용 정책: 익명 읽기/쓰기 허용 (운영 전에는 반드시 조이기!)
create policy "anon select" on public.messages
  for select to anon using (true);

create policy "anon insert" on public.messages
  for insert to anon with check (true);
